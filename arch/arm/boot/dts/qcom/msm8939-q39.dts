/* Copyright (c) 2017, The Linux Foundation. All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License version 2 and
 * only version 2 as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 */

/dts-v1/;

#include "msm8939.dtsi"
#include "msm8939-qrd-skuk.dtsi"
#include "dsi-panel-sharp-r61322-1080p-video.dtsi"
#include "dsi-panel-sharp-r61322-pwm-1080p-video.dtsi"
#include "dsi-panel-nt35596-auo-1080p-skuk-video.dtsi"
#include "dsi-panel-nt35596-auo-1080p-skuk-pwm-video.dtsi"
#include "msm8939-camera-sensor-q39.dtsi"

/ {
	model = "Qualcomm Technologies, Inc. MSM8939 QRD Q39";
	compatible = "qcom,msm8939-qrd-skuk", "qcom,msm8939-qrd", "qcom,msm8939", "qcom,qrd";
	qcom,board-id = <0x10011 5 0x20011 5>;

	/delete-node/regulator-apc-corner;
};

&soc {

	i2c@78b6000 { /* BLSP1 QUP2 */
		akm@d {
			compatible = "ak,ak09911";
			reg = <0xd>;
			pinctrl-names = "default", "sleep";
			pinctrl-0 = <&akm_default>;
			pinctrl-1 = <&akm_sleep>;
			vdd-supply = <&pm8916_l17>;
			vio-supply = <&pm8916_l6>;
			akm,layout = <0x3>;
			akm,gpio_rstn = <&msm_gpio 16 0x0>;
			akm,auto-report;
		};

		bosch@18 { /* Accelerometer sensor */
			compatible = "bosch,bma2x2";
			reg = <0x18>;
			pinctrl-names = "bma_default","bma_sleep";
			pinctrl-0 = <&bma2x2_int1_default &bma2x2_int2_default>;
			pinctrl-1 = <&bma2x2_int1_sleep &bma2x2_int2_sleep>;
			interrupt-parent = <&msm_gpio>;
			interrupts = <112 0x2002>;
			vdd-supply = <&pm8916_l17>;
			vio-supply = <&pm8916_l6>;
			bosch,init-interval = <200>;
			bosch,place = <2>;
			bosch,gpio-int1 = <&msm_gpio 112 0x2002>;
			bosch,gpio-int2 = <&msm_gpio 114 0x2002>;
		};

		capella@60 {
			compatible = "capella,cm36283";
			reg = <0x60>;
			interrupt-parent = <&msm_gpio>;
			interrupts = <113 0x2>;
			vdd-supply = <&pm8916_l17>;
			vio-supply = <&pm8916_l6>;
			capella,use-polling;
			capella,interrupt-gpio = <&msm_gpio 113 0x2>;
			capella,levels = <0x0A 0xA0 0xE1 0x140 0x280 0x500 0xA28 0x16A8 0x1F40 					0x2800>;
			capella,ps_close_thd_set = <0x6>;
			capella,ps_away_thd_set = <0x2>;
			capella,ls_cmd = <0x4>;
			capella,ps_conf1_val = <0x0006>;  /*CM36283_PS_ITB_1_2 | CM36283_PS_DR_1_40| CM36283_PS_IT_1T | CM36283_PS_PERS_2 | CM36283_PS_RES_1*/
			capella,ps_conf3_val = <0x3010>;  /* CM36283_PS_MS_NORMAL | CM36283_PS_PROL_255 | CM36283_PS_SMART_PERS_ENABLE, */
		};

		di@1e {
			compatible = "di,ap3426";
			reg = <0x1e>;
			vdd-supply = <&pm8916_l17>;
			vio-supply = <&pm8916_l6>;
			interrupt-parent = <&msm_gpio>;
			interrupts = <113 0x2002>;
			pinctrl-names = "default", "sleep";
			pinctrl-0 = <&ap3426_default>;
			pinctrl-1 = <&ap3426_sleep>;
			di,irq-gpio = <&msm_gpio 113 0x2002>;
			di,als-cal = <74>;
			di,als-gain = <0>;
			di,als-persist = <2>;
			di,ps-gain = <2>;
			di,ps-persist = <2>;
			di,ps-led-driver = <0>;
			di,ps-mean-time = <2>;
			di,ps-integrated-time = <8>;
			di,ps-distance-table = <887 282 111 78 53 46>;
			di,als-sensitivity = <50>;
			di,wakeup-threshold = <0>;
		};
			/delete-node/avago@39;
	};

	i2c@78b8000 { /* BLSP1 QUP4 */
		smb1360_otg_supply: smb1360-chg-fg@14 {
			compatible = "qcom,smb1360-chg-fg";
			reg = <0x14>;
			interrupt-parent = <&msm_gpio>;
			interrupts = <62 2>;
			pinctrl-names = "default";
			pinctrl-0 = <&smb_int_default>;
			qcom,stat-pulsed-irq;
			qcom,chg-inhibit-disabled;
			qcom,float-voltage-mv = <4350>;
			qcom,iterm-ma = <200>;
			qcom,charging-timeout = <384>;
			qcom,otg-batt-curr-limit = <950>;
			qcom,recharge-thresh-mv = <100>;
			qcom,thermal-mitigation = <1500 700 600 0>;
			qcom,fg-auto-recharge-soc = <99>;
			qcom,empty-soc-disabled;
			regulator-name = "smb1360_otg_vreg";
			qcom,awake-min-soc;
			qcom,batt-profile-select;
			qcom,smb1360-vadc = <&pm8916_vadc>;
			qcom,batt-id-vref-uv = <1800000>;
			qcom,batt-id-rpullup-kohm = <100>;
			qcom,profile-a-rid-kohm = <33>;
			qcom,profile-b-rid-kohm = <91>;
			qcom,config-hard-thresholds;
			qcom,hot-bat-decidegc = <550>;
			qcom,cold-bat-decidegc = <(-150)>;
		};
	};

	i2c@78b9000 { /* BLSP1 QUP5 */
		goodix@5d {
			compatible = "goodix,gt9xx";
			reg = <0x5d>;
			interrupt-parent = <&msm_gpio>;
			interrupts = <13 0x2008>;
			vdd-supply = <&pm8916_l17>;
			vcc-i2c-supply = <&pm8916_l6>;
			goodix,reset-gpios = <&msm_gpio 12 0x0>;
			goodix,interrupt-gpios = <&msm_gpio 13 0x0>;
			goodix,button-map = <139 172 158>;
			goodix,panel-coords = <0 0 1080 1920>;
			goodix,display-coords = <0 0 1080 1920>;
			goodix,product-id = "9157";
			goodix,num_max_touches = <5>;
			goodix,soft_rst_dly = <20>;
			goodix,fw_name = "gtp_fw.bin";
			goodix,fw-vkey-support;
			goodix,i2c-pull-up;
			goodix,no-force-update;
		};
	};

		gen-vkeys {
			label = "gt9xx";
		};

		mcd {
			compatible = "qcom,mcd";
			qcom,ce-hw-instance = <0>;
			qcom,ce-device = <0>;
			clocks = <&clock_gcc clk_crypto_clk_src>,
			 <&clock_gcc clk_gcc_crypto_clk>,
			 <&clock_gcc clk_gcc_crypto_ahb_clk>,
			 <&clock_gcc clk_gcc_crypto_axi_clk>;
			clock-names = "core_clk_src", "core_clk", "iface_clk", "bus_clk";
			qcom,ce-opp-freq = <100000000>;
		};

		gpio-leds {
			compatible = "gpio-leds";

			keypad-backlight {
				gpios = <&msm_gpio 0 0x0>;
				label = "button-backlight";
				linux,default-trigger = "none";
				default-state = "off";
			};
		};

		gpio-leds-simcom {
			compatible = "gpio-leds-simcom";

			singal-light {
			gpios = <&msm_gpio 115 0x0>;
			gpios-enable = <&msm_gpio 69 0x0>;
			label = "singal-light";
			linux,default-trigger = "none";
			default-state = "off";
			retain-state-suspended;
			};
		};

		qcom,lpm-workarounds {
			compatible = "qcom,lpm-workarounds";
			lpm-cx-supply = <105>;
			qcom,lpm-wa-cx-turbo-unvote;
		};

	apc_vreg_corner: regulator@b018000 {
		compatible = "qcom,cpr-regulator";
		reg = <0xb018000 0x1000>, <0xb011064 4>, <0x58000 0x1000>;
		reg-names = "rbcpr", "rbcpr_clk", "efuse_addr";
		interrupts = <0 15 0>;
		regulator-name = "apc_corner";
		regulator-min-microvolt = <1>;
		regulator-max-microvolt = <26>;

		qcom,cpr-fuse-corners = <3>;
		qcom,cpr-voltage-ceiling = <1050000 1150000 1350000>;
		qcom,cpr-voltage-floor = <1050000 1050000 1137500>;
		vdd-apc-supply = <&ncp6335d>;

		qcom,vdd-mx-corner-map = <4 5 7>;
		qcom,vdd-mx-vmin-method = <4>;
		vdd-mx-supply = <&pm8916_l3_corner_ao>;
		qcom,vdd-mx-vmax = <7>;

		mem-acc-supply = <&mem_acc_vreg_corner>;

		qcom,cpr-ref-clk = <19200>;
		qcom,cpr-timer-delay = <5000>;
		qcom,cpr-timer-cons-up = <0>;
		qcom,cpr-timer-cons-down = <2>;
		qcom,cpr-irq-line = <0>;
		qcom,cpr-step-quotient = <13>;
		qcom,cpr-up-threshold = <0>;
		qcom,cpr-down-threshold = <3>;
		qcom,cpr-idle-clocks = <15>;
		qcom,cpr-gcnt-time = <1>;
		qcom,vdd-apc-step-up-limit = <1>;
		qcom,vdd-apc-step-down-limit = <1>;
		qcom,cpr-apc-volt-step = <6250>;

		qcom,cpr-fuse-row = <27 0>;
		qcom,cpr-fuse-target-quot = <42 24 6>;
		qcom,cpr-fuse-ro-sel = <54 54 54>;
		qcom,cpr-quot-min-diff = <0>;
		qcom,cpr-init-voltage-ref = <1050000 1150000 1350000>;
		qcom,cpr-fuse-init-voltage =
					<27 36 6 0>,
					<27 18 6 0>,
					<27 0 6 0>;
		qcom,cpr-init-voltage-step = <10000>;
		qcom,cpr-scaled-init-voltage-as-ceiling;
		qcom,cpr-corner-map = <1 1 1 2 2 2 2 2 2 2 2 2 2 2 3 3 3 3 3 3
					3 3 3 3 3 3>;
		qcom,cpr-corner-frequency-map =
					<1 200000000>,
					<2 345600000>,
					<3 400000000>,
					<4 422400000>,
					<5 499200000>,
					<6 533330000>,
					<7 652800000>,
					<8 729600000>,
					<9 800000000>,
					<10 806400000>,
					<11 883200000>,
					<12 960000000>,
					<13 1036800000>,
					<14 1113600000>,
					<15 1190400000>,
					<16 1267200000>,
					<17 1344000000>,
					<18 1420800000>,
					<19 1497600000>,
					<20 1536000000>,
					<21 1574400000>,
					<22 1612800000>,
					<23 1632000000>,
					<24 1651200000>,
					<25 1689600000>,
					<26 1708800000>;
		qcom,speed-bin-fuse-sel = <1 34 3 0>;
		qcom,cpr-speed-bin-max-corners =
					<0 0 3 14 17>,
					<0 1 3 14 17>,
					<2 0 3 14 19>,
					<2 1 3 14 19>,
					<4 0 3 14 26>,
					<4 1 3 14 26>,
					<5 0 3 14 24>,
					<5 1 3 14 24>;
		qcom,cpr-quot-adjust-scaling-factor-max = <900>;
		qcom,pvs-version-fuse-sel = <0 45 1 0>;
		qcom,cpr-fuse-version-map =
			<2          0 0xffffffff 0xffffffff
					0xffffffff 0xffffffff>,
			<2          1 0xffffffff 0xffffffff
					0xffffffff 0xffffffff>,
			<0xffffffff 0 0xffffffff 0xffffffff
					0xffffffff 0xffffffff>,
			<0xffffffff 1 0xffffffff 0xffffffff
					0xffffffff 0xffffffff>;
		qcom,cpr-init-voltage-adjustment =
					<0 50000 0>,
					<0 20000 0>,
					<0 50000 0>,
					<0 20000 0>;
		qcom,cpr-quotient-adjustment =
					<0 104  0>,
					<0  41  0>,
					<0 104  0>,
					<0  41  0>;
		qcom,cpr-virtual-corner-quotient-adjustment =
			<0 0 0 (-104) (-104) (-104) (-104) (-104) (-104) (-104)
			 (-104) (-104) (-41) 0 0 0 0 0 0 0 0 72 0 0 0 0>,
			<0 0 0 (-104) (-104) (-104) (-104) (-104) (-104) (-104)
			 (-104) (-41) (-41) 0 0 0 0 0 0 0 0 72 0 0 0 0>,
			<0 0 0 (-104) (-104) (-104) (-104) (-104) (-104) (-104)
			 (-104) (-104) (-41) 0 0 0 0 0 0 0 0 0 0 0 0 0>,
			<0 0 0 (-104) (-104) (-104) (-104) (-104) (-104) (-104)
			 (-104) (-41) (-41) 0 0 0 0 0 0 0 0 0 0 0 0 0>;
		qcom,cpr-virtual-corner-init-voltage-adjustment =
			<0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 35000 0 0 0 0>,
			<0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 35000 0 0 0 0>,
			<0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0     0 0 0 0 0>,
			<0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0     0 0 0 0 0>;
		qcom,cpr-voltage-floor-override =
			<0xffffffff 0xffffffff 1050000 1050000 1050000
			1050000 1050000 1050000 1050000 1050000 1050000
			1050000 1050000 1050000 1050000 1100000 1137500
			1137500 1137500 1137500 1137500 1137500 1137500
			1137500 1137500 1137500 1137500 1137500>;
		qcom,cpr-enable;
	};
};

&spmi_bus {
		/delete-property/ qcom,led_mpp_2;
	};

		&pm8916_chg {
			status = "ok";
			qcom,use-external-charger;
		};

		&pm8916_bms {
			status = "ok";
			qcom,disable-bms;
		};

		&mdss_mdp {
       			qcom,mdss-pref-prim-intf = "dsi";
		};

		&mdss_dsi0 {
       			qcom,dsi-pref-prim-pan = <&dsi_sim_vid>;
		};

		&qcom_tzlog {
			status = "okay";
		};
		&qcom_rng {
			status = "okay";
		};

		&qcom_crypto {
			status = "okay";
		};

		&qcom_cedev {
			status = "okay";
		};

		&qcom_seecom {
			status = "okay";
		};
